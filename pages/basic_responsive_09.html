<!doctype html>
<html lang="en" data-active-section="design" data-design-page="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Header (2 rows) + Design View-Mode Toolbar in Main</title>
  <style>
    /* ============ 0) Base + Reset ============ */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      min-height: 100dvh;
      overflow: hidden;
      background: #f3f5f7;
      color: #111;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.4;
    }

    /* ============ 1) Theme Variables ============ */
    :root{
      --page-gap: clamp(10px, 3.5vw, 24px);

      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);

      /* Header now has ONLY 2 rows */
      --header-top-h: clamp(56px, 10vh, 88px);      /* Row 1 */
      --header-second-h: clamp(56px, 10vh, 96px);   /* Row 2 (toolbars) */

      --radius: 14px;
      --surface: #fff;
      --border: 1px solid rgba(0,0,0,0.06);
      --shadow: 0 6px 20px rgba(0,0,0,0.06);

      /* Toolbar-specific */
      --tool-icon: clamp(20px, 5.2vh, 28px);
      --tool-label: clamp(10px, 1.7vh, 13px);
      --tool-gap: 4px;
      --accent: #0d6efd;
    }

    /* ============ 2) App Shell ============ */
    .app{
      display: grid;
      grid-template-rows: auto 1fr; /* header grows/collapses internally */
      padding:
        calc(var(--page-gap) + var(--safe-top))
        calc(var(--page-gap) + var(--safe-right))
        calc(var(--page-gap) + var(--safe-bottom))
        calc(var(--page-gap) + var(--safe-left));
      gap: var(--page-gap);
      height: 100dvh;
      max-width: 1200px;
      margin-inline: auto;
    }

    header, main{ background: var(--surface); border: var(--border); border-radius: var(--radius); box-shadow: var(--shadow); }

    /* MAIN becomes a two-row grid: the new View-Mode toolbar + the content area */
    main{
      overflow: hidden; /* content area will scroll */
      display: grid;
      grid-template-rows: auto 1fr; /* view-toolbar + viewport */
      position: relative;
    }
    .viewport{ overflow: auto; padding: 16px; display: grid; align-content: start; gap: 12px; }
    .card{ background: #fff; border: var(--border); border-radius: 12px; padding: 14px; box-shadow: var(--shadow); }
    .card h3{ margin: 0 0 6px; font-size: 16px; }
    .muted{ color: #5b6470; }

    /* ============ 3) Header (2 internal rows) ============ */
    header{ display: grid; grid-template-rows: var(--header-top-h) 0fr; transition: grid-template-rows 200ms ease; overflow: clip; min-width: 0; }

    /* Row 1 */
    .header-row-top{ display: grid; grid-template-columns: repeat(6, 1fr); align-items: center; padding: 0 8px; gap: 0; min-width: 0; border-bottom: var(--border); }
    .brand{ grid-column: 1 / span 3; display: flex; align-items: center; gap: 10px; min-width: 0; padding-inline: 8px; height: 100%; }
    .brand__logo{ width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #6ea8fe, #9ec5fe); flex: 0 0 auto; }
    .brand__name{ font-weight: 800; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
    .header-tools{ grid-column: 4 / span 3; display: grid; grid-template-columns: repeat(3, 1fr); height: 100%; border-left: var(--border); overflow: clip; }

    /* Row 2 */
    .header-row-secondary{ display: grid; grid-auto-rows: 1fr; padding: 0; background: var(--surface); transition: opacity 160ms ease; opacity: 0; }
    html[data-active-section] header { grid-template-rows: var(--header-top-h) var(--header-second-h); }
    html[data-active-section] .header-row-secondary { opacity: 1; }

    .toolbar-deck{ position: relative; height: 100%; display: grid; }
    .toolbar{ display: grid; grid-template-columns: repeat(6, 1fr); padding: 0; overflow: clip; grid-area: 1 / 1; opacity: 0; pointer-events: none; transition: opacity 150ms ease; }
    html[data-active-section="wares"]  .toolbar[data-section="wares"],
    html[data-active-section="design"] .toolbar[data-section="design"],
    html[data-active-section="order"]  .toolbar[data-section="order"]{ opacity: 1; pointer-events: auto; }

    /* ============ 4) View-Mode Toolbar (lives in MAIN, shows only for Design) ============ */
    .view-mode-toolbar{ display: none; padding: 8px 12px; border-bottom: var(--border); background: linear-gradient(180deg, #fff, #fafbff); border-radius: var(--radius) var(--radius) 0 0; }
    html[data-active-section="design"] .view-mode-toolbar{ display: block; }

    /* Three zones: left (Front/Back), center (Preview/Edit), right (Frame/Design toggles) */
    .view-toolbar-layout{ display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: clamp(10px, 4vw, 28px); max-width: 980px; margin-inline: auto; }
    .zone-left{ justify-self: start; }
    .zone-center{ justify-self: center; }
    .zone-right{ justify-self: end; }

    /* Segmented pill group */
    .seg{ display: inline-flex; align-items: stretch; gap: 0; background: #e9eef4; border: 1px solid rgba(0,0,0,0.08); border-radius: 999px; padding: 3px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.7), 0 6px 18px rgba(2,16,40,0.08); }
    .seg__btn{ appearance: none; border: 0; background: transparent; padding: 8px 14px; font: 600 13px/1 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: #4b5563; border-radius: 999px; display: inline-flex; align-items: center; gap: 8px; cursor: pointer; }

    /* Active/pressed states */
    .seg__btn.is-active,
    .seg__btn[aria-pressed="true"]{ background: #0b213f; color: #fff; box-shadow: 0 10px 22px rgba(11,33,63,.35), 0 1px 0 rgba(255,255,255,.35) inset; }

    /* Icons */
    .ico{ display: inline-grid; place-items: center; width: 18px; height: 18px; border-radius: 50%; background: rgba(0,0,0,0.06); font-size: 12px; }
    .seg__btn.is-active .ico, .seg__btn[aria-pressed="true"] .ico{ background: rgba(255,255,255,0.14); }

    /* ============ 5) Shared tool button styling (header rows) ============ */
    .tool{ display: grid; grid-template-rows: auto auto; align-content: center; justify-items: center; gap: var(--tool-gap); width: 100%; height: 100%; border: 0; background: transparent; font: inherit; cursor: pointer; padding: 6px 0; position: relative; }
    .tool:focus-visible{ outline: 2px solid color-mix(in oklab, var(--accent) 65%, black); outline-offset: -2px; border-radius: 12px; }
    .tool:hover{ background: rgba(13,110,253,0.06); }
    .tool:active{ background: rgba(13,110,253,0.12); }
    .tool[aria-current="page"] .tool__icon, .tool[aria-current="page"] .tool__label{ color: var(--accent); font-weight: 600; }
    .tool[aria-pressed="true"] .tool__icon, .tool[aria-pressed="true"] .tool__label{ color: var(--accent); font-weight: 700; }
    .tool__icon{ width: var(--tool-icon); height: var(--tool-icon); color: #222; }
    .tool__label{ font-size: var(--tool-label); line-height: 1; color: #222; user-select: none; }
    .tool__icon svg{ width: 100%; height: 100%; display: block; }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Header (2 rows) with Design view-mode toolbar in main">

    <!-- HEADER (2 internal rows) -->
    <header role="banner" aria-label="Header with section selector and toolbars">
      <!-- Row 1: Top -->
      <div class="header-row-top">
        <div class="brand">
          <div class="brand__logo" aria-hidden="true"></div>
          <div class="brand__name">My App</div>
        </div>

        <nav class="header-tools" role="navigation" aria-label="Section selector">
          <button class="tool" type="button" data-section="wares" aria-label="Wares">
            <span class="tool__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 7.5 12 3 3 7.5l9 4.5 9-4.5Z"/>
                <path d="M3 7.5V16.5l9 4.5 9-4.5V7.5"/>
                <path d="M12 12v9"/>
              </svg>
            </span>
            <span class="tool__label">Wares</span>
          </button>

          <button class="tool" type="button" data-section="design" aria-label="Design" aria-current="page">
            <span class="tool__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 3h12M6 21h12M4 7h16M8 7v10M16 7v10M4 17h16"/>
              </svg>
            </span>
            <span class="tool__label">Design</span>
          </button>

          <button class="tool" type="button" data-section="order" aria-label="Order">
            <span class="tool__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="20" r="1.6"/>
                <circle cx="17" cy="20" r="1.6"/>
                <path d="M3 4h2l2.5 11.5a2 2 0 0 0 2 1.5h7a2 2 0 0 0 2-1.5L21 8H7"/>
              </svg>
            </span>
            <span class="tool__label">Order</span>
          </button>
        </nav>
      </div>

      <!-- Row 2: Secondary toolbar deck -->
      <div class="header-row-secondary" role="region" aria-label="Section toolbars">
        <div class="toolbar-deck">
          <!-- Wares -->
          <nav class="toolbar" data-section="wares" role="navigation" aria-label="Wares tools">
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3l9 5-9 5-9-5 9-5z"/><path d="M21 8v8l-9 5-9-5V8"/><path d="M12 13v8"/></svg></span><span class="tool__label">Item</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7" rx="1.5"/><rect x="14" y="3" width="7" height="7" rx="1.5"/><rect x="3" y="14" width="7" height="7" rx="1.5"/><rect x="14" y="14" width="7" height="7" rx="1.5"/></svg></span><span class="tool__label">Grid</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 13l-7 7-9-9 7-7 9 9z"/><circle cx="15.5" cy="8.5" r="1.2"/></svg></span><span class="tool__label">Tag</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3l3.4 6.9 7.6 1.1-5.5 5.3 1.3 7.5L12 20l-6.8 3.6 1.3-7.5L1 11.1l7.6-1.2L12 3z"/></svg></span><span class="tool__label">Star</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21l9-9"/><path d="M13 3l2 2M19 5l2 2M15 9l2 2M9 5l2 2"/></svg></span><span class="tool__label">Wand</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z"/></svg></span><span class="tool__label">Bolt</span></button>
          </nav>

          <!-- Design -->
          <nav class="toolbar" data-section="design" role="navigation" aria-label="Design tools">
            <button class="tool" type="button" data-tool="color"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a9 9 0 1 0 0 18h2a2.5 2.5 0 0 0 0-5h-1a3 3 0 0 1-3-3v-1a9 9 0 0 1 2-9Z"/><circle cx="7.5" cy="10.5" r="1.2"/><circle cx="9.5" cy="6.8" r="1.2"/><circle cx="14.5" cy="6.8" r="1.2"/><circle cx="16.5" cy="10.5" r="1.2"/></svg></span><span class="tool__label">Color</span></button>
            <button class="tool" type="button" data-tool="designs"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3h12M6 21h12M4 7h16M8 7v10M16 7v10M4 17h16"/></svg></span><span class="tool__label">Designs</span></button>
            <button class="tool" type="button" data-tool="elements"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="8" height="8" rx="2"/><circle cx="17" cy="7" r="4"/><path d="M12 14l-4 7h8l-4-7Z"/></svg></span><span class="tool__label">Elements</span></button>
            <button class="tool" type="button" data-tool="text"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M5 5h14M12 5v14"/></svg></span><span class="tool__label">Text</span></button>
            <button class="tool" type="button" data-tool="edit"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21l3-1 12-12-2-2L4 18l-1 3z"/><path d="M14 4l2 2"/></svg></span><span class="tool__label">Edit</span></button>
            <button class="tool" type="button" data-tool="layers"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3l9 5-9 5-9-5 9-5z"/><path d="M21 13l-9 5-9-5"/><path d="M21 17l-9 5-9-5"/></svg></span><span class="tool__label">Layers</span></button>
          </nav>

          <!-- Order -->
          <nav class="toolbar" data-section="order" role="navigation" aria-label="Order tools">
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l2-5h14l2 5"/><path d="M4 9h16v10H4z"/><path d="M9 19v-6h6v6"/></svg></span><span class="tool__label">Shop 1</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9h12l-1.5 11H7.5L6 9z"/><path d="M9 9V7a3 3 0 0 1 6 0v2"/></svg></span><span class="tool__label">Shop 2</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M20 13l-7 7-9-9 7-7 9 9z"/><circle cx="15.5" cy="8.5" r="1.2"/></svg></span><span class="tool__label">eBay</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"/><path d="M9 8h6M9 12h5M9 16h6"/></svg></span><span class="tool__label">Etsy</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="20" r="1.6"/><circle cx="17" cy="20" r="1.6"/><path d="M3 5h3l2 10h9l2-7H7"/></svg></span><span class="tool__label">Amazon</span></button>
            <button class="tool" type="button"><span class="tool__icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M10 14l-2 2a4 4 0 0 1-6-6l2-2"/><path d="M14 10l2-2a4 4 0 0 1 6 6l-2 2"/><path d="M8 12h8"/></svg></span><span class="tool__label">Design Link</span></button>
          </nav>
        </div>
      </div>
    </header>

    <!-- MAIN with Design View-Mode toolbar on top -->
    <main role="main" aria-label="Content area">
      <div class="view-mode-toolbar" role="region" aria-label="View mode toolbar">
        <div class="view-toolbar-layout" role="toolbar" aria-label="View & comparison toggles">
          <!-- LEFT: Front / Back (mutually exclusive) -->
          <div class="zone-left">
            <div class="seg" role="group" aria-label="Side">
              <button class="seg__btn is-active" type="button" data-side="front"><span class="ico">‚¨ö</span><span>Front</span></button>
              <button class="seg__btn" type="button" data-side="back"><span class="ico">‚¨ö</span><span>Back</span></button>
            </div>
          </div>

          <!-- CENTER: Preview / Edit (mutually exclusive, centered) -->
          <div class="zone-center">
            <div class="seg" role="group" aria-label="Mode">
              <button class="seg__btn is-active" type="button" data-mode="preview"><span class="ico">üëÅ</span><span>Preview</span></button>
              <button class="seg__btn" type="button" data-mode="edit"><span class="ico">‚úé</span><span>Edit</span></button>
            </div>
          </div>

          <!-- RIGHT: Frame + Design (independent toggles) -->
          <div class="zone-right">
            <div class="seg" role="group" aria-label="Comparisons">
              <button class="seg__btn toggle" type="button" aria-pressed="true" data-toggle="frame"><span class="ico">‚ñ¶</span><span>Frame</span></button>
              <button class="seg__btn toggle" type="button" aria-pressed="false" data-toggle="design"><span class="ico">‚ñ≥</span><span>Design</span></button>
            </div>
          </div>
        </div>
      </div>

      <!-- Scrollable content area below the toolbar -->
      <div class="viewport">
        <section class="card">
          <h3>Main view area</h3>
          <p class="muted">This area takes the remainder of the space. The view-mode toolbar above is visible only in the <em>Design</em> section.</p>
        </section>
        <section class="card"><h3>More content</h3><p class="muted">Add your canvas, preview, or editor here.</p></section>
      </div>
    </main>
  </div>

  <script>
    // ===== Section switching (header row 1) =====
    const headerButtons = document.querySelectorAll('.header-tools .tool');
    function setActive(section){
      document.documentElement.setAttribute('data-active-section', section);
      headerButtons.forEach(btn => {
        if(btn.dataset.section === section){ btn.setAttribute('aria-current', 'page'); } else { btn.removeAttribute('aria-current'); }
      });
    }
    headerButtons.forEach(btn => {
      btn.addEventListener('click', () => setActive(btn.dataset.section));
      btn.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); setActive(btn.dataset.section); } });
    });

    // ===== View toolbar cosmetic interactions (no app logic) =====
    // Front/Back mutual
    const sideBtns = document.querySelectorAll('.view-mode-toolbar [data-side]');
    sideBtns.forEach(b => b.addEventListener('click', () => {
      sideBtns.forEach(x => x.classList.toggle('is-active', x === b));
    }));
    // Preview/Edit mutual
    const modeBtns = document.querySelectorAll('.view-mode-toolbar [data-mode]');
    modeBtns.forEach(b => b.addEventListener('click', () => {
      modeBtns.forEach(x => x.classList.toggle('is-active', x === b));
    }));
    // Frame/Design independent
    document.querySelectorAll('.view-mode-toolbar [data-toggle]')
      .forEach(b => b.addEventListener('click', () => b.setAttribute('aria-pressed', b.getAttribute('aria-pressed') !== 'true')));

    // Initial state
    setActive(document.documentElement.getAttribute('data-active-section') || 'design');
  </script>
</body>
</html>
