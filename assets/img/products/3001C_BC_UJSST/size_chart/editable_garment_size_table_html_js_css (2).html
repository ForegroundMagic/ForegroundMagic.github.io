<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Garment Size Table — Editable</title>
  <style>
    /* THEME TOKENS */
    :root{
      --bg: #f6f8fb;           /* site background */
      --paper: #ffffff;        /* card background */
      --ink: #0f172a;          /* primary text */
      --ink-2: #334155;        /* secondary text */
      --brand: #1976d2;        /* header strip */
      --brand-2:#0ea5e9;       /* header gradient */
      --line: #e2e8f0;         /* borders */
      --radius: 18px;
    }
    /* Dark mode overrides */
    [data-theme="dark"]{
      --bg: #0b1220;
      --paper: #0f172a;
      --ink: #e6edf7;
      --ink-2: #b6c2d9;
      --brand: #2563eb;
      --brand-2:#06b6d4;
      --line: #1f2a44;
    }

    html,body{height:100%}
    body{
      margin:0; padding:24px; background:var(--bg); color:var(--ink);
      font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    /* Toolbar now OUTSIDE the page so screenshots of the card exclude controls */
    .toolbar{position:sticky; top:0; z-index:5; display:flex; gap:10px; padding:12px 16px; align-items:center; background:color-mix(in oklab, var(--paper) 80%, transparent); border:1px solid var(--line); border-radius:12px; width:max-content; margin:0 auto 18px auto; backdrop-filter:saturate(140%) blur(6px)}
    .toolbar .spacer{display:none}
    .btn{appearance:none; cursor:pointer; border:1px solid var(--line); background:var(--paper); color:var(--ink); padding:8px 12px; border-radius:10px; font-weight:600; transition:.15s ease; box-shadow:0 1px 0 rgba(2,8,23,.04)}
    .btn:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(2,8,23,.10)}
    .btn.primary{background:var(--ink); color:#fff; border-color: transparent}
    .btn.ghost{background:transparent}

    .page{max-width: 1100px; margin: 0 auto; background: var(--paper); border-radius: var(--radius); box-shadow: 0 12px 30px rgba(2,8,23,.12); overflow: clip;}
    header{background: linear-gradient(90deg, var(--brand), var(--brand-2)); color: #fff; padding: 20px 28px;}
    .title{font-weight:800; font-size: 24px; letter-spacing:.2px}
    .subtitle{opacity:.95; font-size:14px; margin-top:4px}

    .wrap{padding: 22px 24px 28px}

    table{width:100%; border-collapse: separate; border-spacing:0; overflow:hidden; border-radius:12px;}
    thead th{background: #0b67be; color:#fff; font-weight:800; text-align:center; letter-spacing:.25px; padding: 12px 10px; border-right:1px solid rgba(255,255,255,.22);}
    /* Dark header tint to match theme */
    [data-theme="dark"] thead th{background: #12427f; border-right:1px solid rgba(255,255,255,.12)}
    thead th:first-child{ text-align:left }
    thead th:last-child{ border-right:0 }

    tbody td, tbody th{border-right:1px solid var(--line); border-bottom:1px solid var(--line); padding:12px 10px; text-align:center;}
    tbody th{ text-align:left; background:color-mix(in oklab, var(--paper), var(--bg) 20%); font-weight:700; color:var(--ink-2)}
    tbody tr:last-child td, tbody tr:last-child th{ border-bottom:0 }
    tbody td:last-child, tbody th:last-child{ border-right:0 }

    .footnotes{ margin-top:12px; color:var(--ink-2); font-size: 13px }
    .footnotes li{ margin: 6px 0 }

    .note{ font-size:12px; color:var(--ink-2); margin-left:8px }

    @media print{ body{ background:#fff; padding:0 } .toolbar{ display:none } .page{ box-shadow:none; border-radius:0; } }
    [contenteditable="true"]:focus{ outline: 3px solid color-mix(in oklab, var(--brand-2) 45%, transparent); border-radius:4px }
  </style>
</head>
<body>
  <!-- Controls OUTSIDE the card/table for cleaner screenshots -->
  <div class="toolbar" role="group" aria-label="Table controls">
    <button class="btn primary" id="toggleEdit">Enable edit mode</button>
    <button class="btn" id="exportJSON">Export JSON</button>
    <label class="btn" for="importJSON">Import JSON</label>
    <input id="importJSON" type="file" accept="application/json" style="display:none" />
    <button class="btn ghost" id="toggleTheme" title="Light/Dark">Dark mode</button>
    <span class="note">Tip: Toggle edit mode, then click a cell to edit.</span>
  </div>

  <div class="page" id="card">
    <header>
      <div class="title" id="title" contenteditable="false">Unisex Jersey Short-Sleeve T‑Shirt 3001C</div>
      <div class="subtitle" id="subtitle" contenteditable="false">Actual Garment Measurements</div>
    </header>

    <div class="wrap">
      <div id="tableMount"></div>
      <ul class="footnotes" id="footnotes"></ul>
    </div>
  </div>

  <script>
  // -------- Data model you can easily modify ---------
  let data = {
    title: "Unisex Jersey Short-Sleeve T-Shirt 3001C",
    subtitle: "Actual Garment Measurements",
    columns: ["", "XS", "S", "M", "L", "XL", "2XL", "3XL", "4XL"],
    rows: [
      { label: "Chest (Front Only)", values: ["16½", "18", "20", "22", "24", "26", "28", "30"] },
      { label: "Body Length",        values: ["27",  "28", "29", "30", "31", "32", "33", "34"] }
    ],
    footnotes: [
      "Chest - Measured across chest, one inch below armhole when laid flat.",
      "Body Length - Measured from high point of shoulder from the front."
    ]
  };

  const root = document.documentElement; // for theme
  const tableMount = document.getElementById('tableMount');
  const foot = document.getElementById('footnotes');

  function render(){
    document.getElementById('title').textContent = data.title;
    document.getElementById('subtitle').textContent = data.subtitle;

    const table = document.createElement('table');

    // header
    const thead = document.createElement('thead');
    const hr = document.createElement('tr');
    data.columns.forEach((col, i)=>{
      const th = document.createElement('th');
      th.textContent = col;
      th.dataset.colIndex = i;
      hr.appendChild(th);
    });
    thead.appendChild(hr);

    // body
    const tbody = document.createElement('tbody');
    data.rows.forEach((row, rIndex)=>{
      const tr = document.createElement('tr');
      const th = document.createElement('th');
      th.textContent = row.label; th.dataset.rowIndex = rIndex; th.dataset.kind = 'rowLabel';
      tr.appendChild(th);
      data.columns.slice(1).forEach((_, cIndex)=>{
        const td = document.createElement('td');
        td.textContent = row.values[cIndex] ?? '';
        td.dataset.rowIndex = rIndex;
        td.dataset.colIndex = cIndex+1;
        td.dataset.kind = 'cell';
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });

    // mount
    table.appendChild(thead); table.appendChild(tbody);
    tableMount.innerHTML = '';
    tableMount.appendChild(table);

    // footnotes
    foot.innerHTML = '';
    data.footnotes.forEach((t, i)=>{
      const li = document.createElement('li');
      li.textContent = t; li.dataset.index = i; li.dataset.kind = 'footnote';
      foot.appendChild(li);
    });
  }

  render();

  // ---------- Edit mode handling ----------
  let edit = false;
  function setEditable(on){
    edit = on;
    document.getElementById('title').contentEditable = String(on);
    document.getElementById('subtitle').contentEditable = String(on);
    document.querySelectorAll('tbody td, tbody th, thead th, .footnotes li').forEach(el=>{
      const isHeader = el.closest('thead') !== null;
      const isFirstHeader = isHeader && Number(el.dataset.colIndex) === 0;
      const isRowLabel = el.dataset.kind === 'rowLabel';
      const isCell = el.dataset.kind === 'cell';
      const isFoot = el.dataset.kind === 'footnote';
      el.contentEditable = String(on && (isCell || isRowLabel || isFoot || isFirstHeader));
    });
    document.getElementById('toggleEdit').textContent = on ? 'Disable edit mode' : 'Enable edit mode';
  }

  document.getElementById('toggleEdit').addEventListener('click',()=>{
    setEditable(!edit);
  });

  // Persist edits back to data model
  document.addEventListener('input', (e)=>{
    if(!edit) return;
    const t = e.target;
    if(t.id === 'title') data.title = t.textContent.trim();
    if(t.id === 'subtitle') data.subtitle = t.textContent.trim();

    if(t.closest('thead')){
      const idx = Number(t.dataset.colIndex);
      data.columns[idx] = t.textContent.trim();
    }
    if(t.dataset.kind === 'rowLabel'){
      data.rows[Number(t.dataset.rowIndex)].label = t.textContent.trim();
    }
    if(t.dataset.kind === 'cell'){
      const r = Number(t.dataset.rowIndex);
      const c = Number(t.dataset.colIndex) - 1; // values index
      data.rows[r].values[c] = t.textContent.trim();
    }
    if(t.dataset.kind === 'footnote'){
      data.footnotes[Number(t.dataset.index)] = t.textContent.trim();
    }
  });

  // ---------- Export / Import ----------
  document.getElementById('exportJSON').addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'garment-table.json';
    a.click();
    URL.revokeObjectURL(a.href);
  });

  document.getElementById('importJSON').addEventListener('change', (e)=>{
    const file = e.target.files?.[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try{ data = JSON.parse(reader.result); render(); if(edit) setEditable(true); }
      catch(err){ alert('Invalid JSON file.'); }
    };
    reader.readAsText(file);
  });

  // ---------- Theme toggle (light/dark) ----------
  function setTheme(mode){
    document.documentElement.setAttribute('data-theme', mode);
    document.getElementById('toggleTheme').textContent = mode === 'dark' ? 'Light mode' : 'Dark mode';
    localStorage.setItem('sizeTableTheme', mode);
  }
  const preferred = localStorage.getItem('sizeTableTheme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  setTheme(preferred);
  document.getElementById('toggleTheme').addEventListener('click', ()=>{
    const next = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    setTheme(next);
  });
  </script>
</body>
</html>
